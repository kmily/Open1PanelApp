# 计划任务管理模块FAQ

## 常见问题

### 1. Cron表达式如何编写？

**基本格式**: `分 时 日 月 周`

**示例**:
- `0 * * * *` - 每小时执行
- `0 0 * * *` - 每天凌晨执行
- `0 0 * * 0` - 每周日执行
- `0 0 1 * *` - 每月1号执行
- `*/5 * * * *` - 每5分钟执行

**特殊字符**:
- `*` - 任意值
- `,` - 列举值
- `-` - 范围
- `/` - 步长

### 2. 任务执行失败如何排查？

**排查步骤**:
1. 查看执行日志获取错误信息
2. 检查命令/脚本语法
3. 验证执行权限
4. 检查环境变量
5. 确认依赖资源可用

### 3. 如何创建周期性备份任务？

**操作步骤**:
1. 进入计划任务管理
2. 点击"创建任务"
3. 填写任务名称和描述
4. 设置Cron表达式（如每天凌晨2点：`0 2 * * *`）
5. 输入备份命令
6. 保存任务

### 4. 任务执行历史保留多久？

**默认配置**:
- 执行记录默认保留30天
- 日志文件默认保留7天
- 可在设置中自定义保留策略

**清理方法**:
1. 进入执行历史页面
2. 点击"清理记录"
3. 选择清理条件
4. 确认清理

### 5. 如何查看任务执行日志？

**查看方法**:
1. 进入计划任务管理
2. 点击任务名称进入详情
3. 切换到"执行历史"标签
4. 选择执行记录
5. 点击"查看日志"

### 6. 任务可以手动执行吗？

**操作方法**:
1. 在任务列表找到目标任务
2. 点击"立即执行"按钮
3. 确认执行操作
4. 查看执行状态和结果

### 7. 如何禁用/启用任务？

**操作方法**:
- **禁用**: 任务列表 > 点击禁用按钮 > 确认
- **启用**: 任务列表 > 点击启用按钮 > 确认

**注意**: 禁用后任务将不会按计划执行

### 8. 任务执行超时怎么办？

**解决方案**:
1. 检查任务脚本是否存在死循环
2. 优化任务执行效率
3. 设置合理的超时时间
4. 考虑拆分大任务

### 9. 支持哪些任务类型？

**支持类型**:
- Shell命令执行
- 脚本文件执行
- 数据库备份
- 文件清理
- 自定义脚本

### 10. 任务执行结果如何通知？

**通知方式**:
- 执行失败时发送通知
- 支持邮件通知
- 支持Webhook通知
- 可在设置中配置通知规则

## 故障排查指南

### 任务不执行
```
问题: 任务到达执行时间但未执行
排查:
1. 检查任务是否启用
2. 验证Cron表达式正确性
3. 检查系统时间设置
4. 查看cron服务状态
5. 检查任务执行权限
```

### 执行失败
```
问题: 任务执行返回非零状态
排查:
1. 查看执行日志详情
2. 手动执行命令测试
3. 检查环境变量设置
4. 验证文件路径正确性
5. 确认依赖服务可用
```

### 日志无法查看
```
问题: 点击查看日志无响应
排查:
1. 检查日志文件是否存在
2. 验证文件权限
3. 检查日志文件大小
4. 确认存储空间充足
```

## 最佳实践

### 任务设计
- 保持任务脚本简洁
- 添加适当的错误处理
- 记录执行日志
- 设置合理的超时时间

### 调度策略
- 避免高峰期执行重任务
- 合理分散任务执行时间
- 考虑任务依赖关系
- 设置任务互斥机制

### 运维建议
- 定期检查任务执行状态
- 清理无用的历史记录
- 监控任务执行时长
- 建立任务变更审批流程

---

**文档版本**: 1.0
**最后更新**: 2026-02-14
