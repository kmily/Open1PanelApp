# 应用管理模块FAQ

## 常见问题

### Q1: 应用商店有哪些应用？

**A**: 应用商店包含多种类型的应用：
- **网站运行环境** - Nginx、Apache、OpenResty
- **数据库** - MySQL、PostgreSQL、Redis、MongoDB
- **运行时** - Node.js、Python、Java、Go、PHP
- **容器编排** - Docker、Kubernetes
- **监控工具** - Prometheus、Grafana
- **其他工具** - FTP、Git、Jenkins等

**相关代码**: [app_v2.dart](../../../lib/api/v2/app_v2.dart)

### Q2: 如何安装应用？

**A**: 安装应用步骤：
1. 进入应用商店页面
2. 浏览或搜索目标应用
3. 点击"安装"按钮
4. 配置安装参数（版本、端口等）
5. 点击"确认安装"
6. 等待安装完成

**API端点**: `POST /apps/install`

### Q3: 应用安装失败怎么办？

**A**: 安装失败排查：
1. 检查网络连接
2. 确认系统资源充足
3. 查看安装日志
4. 检查端口冲突
5. 重试安装

### Q4: 如何更新应用？

**A**: 更新应用步骤：
1. 进入已安装应用列表
2. 找到需要更新的应用
3. 点击"更新"按钮
4. 选择目标版本
5. 确认更新

**API端点**: `POST /apps/update`

### Q5: 如何卸载应用？

**A**: 卸载应用步骤：
1. 进入已安装应用列表
2. 找到目标应用
3. 点击"卸载"按钮
4. 选择是否保留数据
5. 确认卸载

**API端点**: `POST /apps/uninstall`

### Q6: 应用端口冲突怎么办？

**A**: 解决端口冲突：
1. 查看端口占用情况
2. 修改应用端口配置
3. 停止占用端口的服务
4. 重新启动应用

### Q7: 如何查看应用日志？

**A**: 查看应用日志：
1. 进入应用详情页面
2. 点击"日志"标签
3. 选择日志类型
4. 查看实时或历史日志

### Q8: 应用状态有哪些？

**A**: 应用状态说明：
- **运行中** - 应用正常运行
- **已停止** - 应用已停止
- **安装中** - 正在安装
- **更新中** - 正在更新
- **错误** - 应用异常

### Q9: 如何配置应用参数？

**A**: 配置应用参数：
1. 进入应用详情页面
2. 点击"参数配置"
3. 修改配置项
4. 保存配置
5. 重启应用生效

### Q10: 应用数据存储在哪里？

**A**: 应用数据存储位置：
- 应用目录: `/opt/1panel/apps/{app}/`
- 数据目录: `/opt/1panel/apps/{app}/data/`
- 配置目录: `/opt/1panel/apps/{app}/conf/`
- 日志目录: `/opt/1panel/apps/{app}/logs/`

## 故障排查指南

### 问题1: 应用无法启动

**可能原因**:
- 端口被占用
- 配置错误
- 依赖缺失
- 权限问题

**排查步骤**:
1. 检查端口占用
2. 验证配置文件
3. 检查依赖状态
4. 查看错误日志

### 问题2: 应用运行缓慢

**可能原因**:
- 资源不足
- 配置不当
- 网络问题

**排查步骤**:
1. 检查系统资源
2. 优化配置参数
3. 检查网络连接
4. 查看性能指标

### 问题3: 应用无法访问

**可能原因**:
- 服务未启动
- 防火墙阻止
- 网络配置错误

**排查步骤**:
1. 检查服务状态
2. 验证防火墙规则
3. 检查网络配置
4. 查看访问日志

### 问题4: 更新失败

**可能原因**:
- 网络问题
- 版本不兼容
- 存储空间不足

**排查步骤**:
1. 检查网络连接
2. 验证版本兼容性
3. 检查磁盘空间
4. 查看更新日志

### 问题5: 数据丢失

**可能原因**:
- 误删除
- 存储故障
- 备份未执行

**排查步骤**:
1. 检查数据目录
2. 查看操作日志
3. 恢复备份数据
4. 配置自动备份

## 最佳实践建议

### 开发建议

1. **使用Provider管理状态**
   ```dart
   class AppProvider extends ChangeNotifier {
     List<AppInfo> _installedApps = [];
     List<AppDetail> _storeApps = [];
     
     Future<void> loadInstalledApps() async {
       // 加载已安装应用
     }
   }
   ```

2. **实现安装进度跟踪**
   ```dart
   Stream<InstallProgress> installApp(String appId) async* {
     // 返回安装进度
   }
   ```

3. **错误处理**
   - 提供详细的错误信息
   - 支持重试机制
   - 记录操作日志

### 运维建议

1. **应用管理**
   - 定期更新应用
   - 监控应用状态
   - 及时处理告警

2. **资源规划**
   - 合理分配资源
   - 监控资源使用
   - 预留扩展空间

3. **安全配置**
   - 及时更新补丁
   - 配置访问控制
   - 定期安全审计

---

**文档版本**: 1.0  
**最后更新**: 2026-02-14  
**维护者**: Open1Panel开发团队
